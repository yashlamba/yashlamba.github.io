<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Snake Game in Minutes with Flutter | home/</title><meta name=keywords content="project,flutter,game,beginner,mini project"><meta name=description content="Introduction Snake game is probably one of the most known video games in the world and I have built it multiple times, why? Because it’s a good intro project to any new language or framework. I have built it with Python, C++, Javascript, and Dart (Flutter). I frequently use it as an example when I’m teaching someone the basics of a language/framework.
In this tutorial, we’ll build the Snake Game with Flutter."><meta name=author content="Yash Lamba"><link rel=canonical href=https://yashlamba.com/blogs/flutter-snake/><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://yashlamba.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://yashlamba.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yashlamba.com/favicon-32x32.png><link rel=apple-touch-icon href=https://yashlamba.com/apple-touch-icon.png><link rel=mask-icon href=https://yashlamba.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-154810488-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Snake Game in Minutes with Flutter"><meta property="og:description" content="Introduction Snake game is probably one of the most known video games in the world and I have built it multiple times, why? Because it’s a good intro project to any new language or framework. I have built it with Python, C++, Javascript, and Dart (Flutter). I frequently use it as an example when I’m teaching someone the basics of a language/framework.
In this tutorial, we’ll build the Snake Game with Flutter."><meta property="og:type" content="article"><meta property="og:url" content="https://yashlamba.com/blogs/flutter-snake/"><meta property="og:image" content="https://yashlamba.com/images/snake_game.gif"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2022-04-24T21:52:20+05:30"><meta property="article:modified_time" content="2022-04-24T21:52:20+05:30"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yashlamba.com/images/snake_game.gif"><meta name=twitter:title content="Snake Game in Minutes with Flutter"><meta name=twitter:description content="Introduction Snake game is probably one of the most known video games in the world and I have built it multiple times, why? Because it’s a good intro project to any new language or framework. I have built it with Python, C++, Javascript, and Dart (Flutter). I frequently use it as an example when I’m teaching someone the basics of a language/framework.
In this tutorial, we’ll build the Snake Game with Flutter."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://yashlamba.com/blogs/"},{"@type":"ListItem","position":2,"name":"Snake Game in Minutes with Flutter","item":"https://yashlamba.com/blogs/flutter-snake/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Snake Game in Minutes with Flutter","name":"Snake Game in Minutes with Flutter","description":"Introduction Snake game is probably one of the most known video games in the world and I have built it multiple times, why? Because it’s a good intro project to any new language or framework. I have built it with Python, C++, Javascript, and Dart (Flutter). I frequently use it as an example when I’m teaching someone the basics of a language/framework.\nIn this tutorial, we’ll build the Snake Game with Flutter.","keywords":["project","flutter","game","beginner","mini project"],"articleBody":"Introduction Snake game is probably one of the most known video games in the world and I have built it multiple times, why? Because it’s a good intro project to any new language or framework. I have built it with Python, C++, Javascript, and Dart (Flutter). I frequently use it as an example when I’m teaching someone the basics of a language/framework.\nIn this tutorial, we’ll build the Snake Game with Flutter. Some interesting things we’ll cover:\n Object-Oriented Design No frameworks - No game engines or third party libraries Flaws and Future Follow Ups  Things that aren’t covered well:\n Structuring a Flutter project - We’ll do it in one single file (executable on dartpad.dev) UI/UX - No menu, UI, glyphs, etc. Scoring - Because it doesn’t add value to project.  Let’s start:\nFor any simple single-player game, I usually start by thinking the following, step by step:\n Objects: What are the moving parts of the game, and which objects matter for building the MPG (Minimum Playable Game). In our game, they are the Snake and it’s food. State: The state of the game and connecting the objects. In the snake game, the state is a grid, wherein the snake and food will be. We’ll draw these using simple containers. Update State: The snake has to continually move forward which is a periodic update, and based on this (and the user input) the objects will have to respond to different states like snake eating the food, snake biting itself, snake hitting the wall, changing direction, etc. Controls: User controls; In our case, change the direction of the snake based on input (arrow keys to set the direction). Score: Score calculation and reset - number of food eaten. (not implemented in this tutorial though)  So having these things sorted, let’s code!\nFoundation We start with a stateless widget SnakeGame to define our MaterialApp. Followed by a stateful widget Game which would render our game and manage the State.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  import 'package:flutter/material.dart';  void main() {  runApp(const SnakeGame()); }  class SnakeGame extends StatelessWidget {  const SnakeGame({Key? key}) : super(key: key);   @override  Widget build(BuildContext context) {  return const MaterialApp(  title: \"Snake Game\",  home: Center(  child: Game(),  ),  );  } }  class Game extends StatefulWidget {  const Game({Key? key}) : super(key: key);   @override  StateGame createState() = _GameState(); }  class _GameState extends StateGame {  @override  Widget build(BuildContext context) {  return Container(  width: 500, // Update with constants in next step  height: 500, // Update with constants in next step  color: Colors.black,  ); \t} }   Since we’ll need a few constants, let’s define a Constants class to access/modify them easily. Right now, we need 2 constants, canvasSize (height and width of the canvas) and blockSize (size of 1 block) so that we can imagine our canvas as a grid of side canvasSize/blockSize elements.\n1 2 3 4 5  class Constants {  // Canvas  static const double canvasSize = 500;  static const double blockSize = 10; }   After replacing height and width in the GameState with Constants.canvasSize we have a 50x50 imaginary grid to work with.\n Empty Canvas\n  Models/Objects Let’s start with our Snake; To represent the snake we’ll use a List of 2D points, and the number of points increases when the snake eats food. The first element of the list will be the location of the head and the last element, the tail. A point is just x, y values on a grid and for that, we’ll use dart’s Point class (imported from dart:math).\nWe also need a direction to represent in which direction the snake is moving, this can also be represented using a Point object since we just need to update the head of the snake along a certain axis, i.e. certain x, y values. We can add these directions to the constants and define our snake:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  class Constants {  // Canvas  static const double canvasSize = 500;  static const double blockSize = 10;   // Directions  static const up = Point(0, -1);  static const down = Point(0, 1);  static const right = Point(1, 0);  static const left = Point(-1, 0); }  class Snake {  ListPointint snake = [const Point(0, 0)];  Pointint direction = Constants.right;   Pointint get head {  return snake[0];  } }   Now, we can add a snake object to our GameState along with the food, which also can be just a Point. In the below code, we introduce some things:\n random: To generate random numbers (random food locations). initGame: To initialize the Snake object and food location. foodUpdate: To update food location.  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  class _GameState extends StateGame { \tlate Snake snake; \tlate Pointint food; \tRandom random = Random();  \t@override \tvoid initState() { \tinitGame(); \tsuper.initState(); \t}  \tinitGame() { \tsnake = Snake(); \tfoodUpdate(); \t}  \tvoid foodUpdate() { \tfood = Point(random.nextInt(Constants.canvasSize ~/ Constants.blockSize), \trandom.nextInt(Constants.canvasSize ~/ Constants.blockSize)); \t}  \t@override \tWidget build(BuildContext context) { \treturn Container( \twidth: Constants.canvasSize, \theight: Constants.canvasSize, \tcolor: Colors.black, \t); \t} }   Now we are more or less done with the foundation code, we just need to paint the snake and food on the canvas. For that, we’ll use Stack and Positioned Widgets. Positioned puts a widget to provided locations in a Stack. We’ll use the properties, top and left to set y and x of the widget respectively.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  Widget build(BuildContext context) {  return Container(  width: Constants.canvasSize,  height: Constants.canvasSize,  color: Colors.black,  child: Stack(  children: snake.snake  .map((e) = Positioned(  top: Constants.blockSize * e.y,  left: Constants.blockSize * e.x,  child: Container(  height: Constants.blockSize,  width: Constants.blockSize,  color: Colors.green,  ),  ))  .toList() +  [  Positioned(  top: Constants.blockSize * food.y,  left: Constants.blockSize * food.x,  child: Container(  height: Constants.blockSize,  width: Constants.blockSize,  color: Colors.red,  ),  )  ],  ),  ); }   In the above code, we basically created a Positioned Widget for each part of the snake and added a food object as well to that list.\n Painting Snake and Food\n  Update State Let’s make the game alive now. We want to periodically update the state of the canvas and for that, we can use Timer.periodic (imported from dart:async) which calls a function after certain Duration periodically.\nWe can add it to the initState which gets called once our game starts. We also need an update function, which is passed as a callback to Timer.periodic and is responsible for updating the game state.\nBefore implementing this gameUpdate function, let’s see what we actually need to update:\n Move the snake in a particular direction Check if the snake’s head overlaps with food  if yes, eat food, add length to the snake, and call foodUpdate   Check if the snake’s head overlapped with any other body part, if yes, reset the game.  Implementation (added to GameState):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  @override void initState() {  initGame();  Timer.periodic(const Duration(milliseconds: 50), (t) {  gameUpdate();  });  super.initState(); }  void gameUpdate() {  // update this  if (food == snake.head) {  snake.eatFood();  foodUpdate();  } else {  snake.update();  }  if (snake.didBiteItself()) {  initGame();  }  setState(() {}); }   Added to Snake Class:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  bool didBiteItself() {  for (int i = 1; i  snake.length; i++) {  if (snake[i] == head) {  return true;  }  }  return false; }  void update() {  // For moving in a direction, move all body parts to the location of the  // part before them  for (int i = snake.length - 1; i  0; --i) {  snake[i] = snake[i - 1];  }  // Then update in the direction snake is moving \t// Mod 50 because, we want the snake to wrap when hitting a wall  snake[0] = Point((head.x + direction.x) % 50, (head.y + direction.y) % 50); }  void eatFood() {  // Since food is added to the end and snake would ultimately  // Update one position, save the last location and append it again.  var foodLoc = snake.last;  update();  snake.add(foodLoc); }   At this point, our game starts working (not controllable though). One bug I would like to address is that our foodUpdate might add the food on the snake’s body, so let’s add a check for that.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  // In the Stateful Widget void foodUpdate() {  do {  food = Point(random.nextInt(Constants.canvasSize ~/ Constants.blockSize),  random.nextInt(Constants.canvasSize ~/ Constants.blockSize));  } while (snake.pointOnSnake(food)); }  // In the snake class bool pointOnSnake(Pointint point) {  for (Point body in snake) {  if (body == point) {  return true;  }  }  return false; }   Another interesting thing in the above code is snake[0] = Point((head.x + direction.x) % 50, (head.y + direction.y) % 50); this line is really interesting on how it handles negative x, y cases (read about mod with negative numbers).\n Controls We are pretty much done now, we just need to be able to control the snake, that’s it. I understand the chronology of this is a bit weird and we should have done this before the whole eat food logic, but having implemented the snake game quite a bit, I usually do this at the end.\nThis part doesn’t need much explanation, just two things are sufficient I guess:\n We are using RawKeyboardListener widget with autofocus set to true (so that we don’t have to tap it to take control). We’ll also define a keyHandler function to handle the events by the listener. (LogicalKeyboardKey is imported from flutter/services.dart) Two edge/additional cases I would like to address:  We don’t allow the snake to go in the direct opposite direction. We don’t call setState because regardless, it would be called within max 50 ms; We CAN call it but it won’t make much of a difference.    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57  void keyHandler(RawKeyEvent event) {  if (event.logicalKey == LogicalKeyboardKey.arrowDown) {  if (snake.direction != Constants.up) {  snake.direction = Constants.down;  }  } else if (event.logicalKey == LogicalKeyboardKey.arrowUp) {  if (snake.direction != Constants.down) {  snake.direction = Constants.up;  }  } else if (event.logicalKey == LogicalKeyboardKey.arrowRight) {  if (snake.direction != Constants.left) {  snake.direction = Constants.right;  }  } else if (event.logicalKey == LogicalKeyboardKey.arrowLeft) {  if (snake.direction != Constants.right) {  snake.direction = Constants.left;  }  } }  @override Widget build(BuildContext context) {  return RawKeyboardListener(  focusNode: FocusNode(),  onKey: keyHandler,  autofocus: true,  child: Container(  width: Constants.canvasSize,  height: Constants.canvasSize,  color: Colors.black,  child: Stack(  children: snake.snake // Update This  .map((e) = Positioned(  top: Constants.blockSize * e.y,  left: Constants.blockSize * e.x,  child: Container(  height: Constants.blockSize,  width: Constants.blockSize,  color: Colors.green,  ),  ))  .toList() +  [  Positioned(  top: Constants.blockSize * food.y,  left: Constants.blockSize * food.x,  child: Container(  height: Constants.blockSize,  width: Constants.blockSize,  color: Colors.red,  ),  )  ],  ),  ),  ); }   Voila! Our game is ready. Try it below:\n Follow Ups  This implementation still has a few IO bugs which can lead to snake dying (hint: the way we load frames and update direction). We can use an input queue to fix that. Haven’t implemented score because it’s trivial for this game. A good follow up project would be to implement a multiplayer version of this.   This project is quite simple and probaly not blog worthy, but I wrote it anyways because, it was fun and I wanted an easy writeup to get out of my writing rut:)\n   Links  Source: Snake Game DartPad: Play Snake Game   ","wordCount":"2034","inLanguage":"en","image":"https://yashlamba.com/images/snake_game.gif","datePublished":"2022-04-24T21:52:20+05:30","dateModified":"2022-04-24T21:52:20+05:30","author":{"@type":"Person","name":"Yash Lamba"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yashlamba.com/blogs/flutter-snake/"},"publisher":{"@type":"Organization","name":"home/","logo":{"@type":"ImageObject","url":"https://yashlamba.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://yashlamba.com/ accesskey=h title="home/ (Alt + H)">home/</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://yashlamba.com/about title=about/><span>about/</span></a></li><li><a href=https://yashlamba.com/projects/ title=projects/><span>projects/</span></a></li><li><a href=https://yashlamba.com/blogs/ title=blog/><span>blog/</span></a></li><li><a href=https://yashlamba.com/Resume_YashLamba.pdf title=resume/><span>resume/</span></a></li><li><a href=https://yashlamba.com/search title=search/><span>search/</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://yashlamba.com/>Home</a>&nbsp;»&nbsp;<a href=https://yashlamba.com/blogs/>Blogs</a></div><h1 class=post-title>Snake Game in Minutes with Flutter</h1><div class=post-meta><span title="2022-04-24 21:52:20 +0530 +0530">April 24, 2022</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Yash Lamba</div></header><figure class=entry-cover><img loading=lazy src=https://yashlamba.com/images/snake_game.gif alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#foundation aria-label=Foundation>Foundation</a></li><li><a href=#modelsobjects aria-label=Models/Objects>Models/Objects</a></li><li><a href=#update-state aria-label="Update State">Update State</a></li><li><a href=#controls aria-label=Controls>Controls</a></li><li><a href=#follow-ups aria-label="Follow Ups">Follow Ups</a></li></ul></div></details></div><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Snake game is probably one of the most known video games in the world and I have built it multiple times, why? Because it’s a good intro project to any new language or framework. I have built it with Python, C++, Javascript, and Dart (Flutter). I frequently use it as an example when I’m teaching someone the basics of a language/framework.</p><p>In this tutorial, we’ll build the Snake Game with Flutter. Some interesting things we’ll cover:</p><ol><li>Object-Oriented Design</li><li>No frameworks - No game engines or third party libraries</li><li>Flaws and Future Follow Ups</li></ol><p>Things that aren’t covered well:</p><ol><li><code>Structuring a Flutter project</code> - We’ll do it in one single file (executable on dartpad.dev)</li><li><code>UI/UX</code> - No menu, UI, glyphs, etc.</li><li><code>Scoring</code> - Because it doesn&rsquo;t add value to project.</li></ol><p><strong>Let’s start:</strong></p><p>For any simple single-player game, I usually start by thinking the following, step by step:</p><ol><li><code>Objects</code>: What are the moving parts of the game, and which objects matter for building the MPG (Minimum Playable Game). In our game, they are the Snake and it&rsquo;s food.</li><li><code>State</code>: The state of the game and connecting the objects. In the snake game, the state is a grid, wherein the snake and food will be. We’ll draw these using simple containers.</li><li><code>Update State</code>: The snake has to continually move forward which is a periodic update, and based on this (and the user input) the objects will have to respond to different states like snake eating the food, snake biting itself, snake hitting the wall, changing direction, etc.</li><li><code>Controls</code>: User controls; In our case, change the direction of the snake based on input (arrow keys to set the direction).</li><li><code>Score</code>: Score calculation and reset - number of food eaten. (not implemented in this tutorial though)</li></ol><p>So having these things sorted, let’s code!</p><h2 id=foundation>Foundation<a hidden class=anchor aria-hidden=true href=#foundation>#</a></h2><p>We start with a stateless widget <code>SnakeGame</code> to define our <code>MaterialApp</code>. Followed by a stateful widget <code>Game</code> which would render our game and manage the <code>State</code>.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;package:flutter/material.dart&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  runApp(<span style=color:#66d9ef>const</span> SnakeGame());
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SnakeGame</span> <span style=color:#66d9ef>extends</span> StatelessWidget {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> SnakeGame({Key<span style=color:#f92672>?</span> key}) <span style=color:#f92672>:</span> <span style=color:#66d9ef>super</span>(key: key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span>override
</span></span><span style=display:flex><span>  Widget build(BuildContext context) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>const</span> MaterialApp(
</span></span><span style=display:flex><span>      title: <span style=color:#e6db74>&#34;Snake Game&#34;</span>,
</span></span><span style=display:flex><span>      home: Center(
</span></span><span style=display:flex><span>        child: Game(),
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Game</span> <span style=color:#66d9ef>extends</span> StatefulWidget {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> Game({Key<span style=color:#f92672>?</span> key}) <span style=color:#f92672>:</span> <span style=color:#66d9ef>super</span>(key: key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span>override
</span></span><span style=display:flex><span>  State<span style=color:#f92672>&lt;</span>Game<span style=color:#f92672>&gt;</span> createState() <span style=color:#f92672>=&gt;</span> _GameState();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>_GameState</span> <span style=color:#66d9ef>extends</span> State<span style=color:#f92672>&lt;</span>Game<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span>override
</span></span><span style=display:flex><span>  Widget build(BuildContext context) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> Container(
</span></span><span style=display:flex><span>      width: <span style=color:#ae81ff>500</span>, <span style=color:#75715e>// Update with constants in next step
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      height: <span style=color:#ae81ff>500</span>, <span style=color:#75715e>// Update with constants in next step
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      color: Colors.black,
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Since we’ll need a few constants, let’s define a <code>Constants</code> class to access/modify them easily. Right now, we need 2 constants, <code>canvasSize</code> (height and width of the canvas) and <code>blockSize</code> (size of 1 block) so that we can imagine our canvas as a grid of side <code>canvasSize/blockSize</code> elements.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Constants</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>double</span> canvasSize <span style=color:#f92672>=</span> <span style=color:#ae81ff>500</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>double</span> blockSize <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>After replacing height and width in the <code>GameState</code> with <code>Constants.canvasSize</code> we have a 50x50 imaginary grid to work with.</p><figure class=align-center><img loading=lazy src=https://raw.githubusercontent.com/yashlamba/portfolio/master/assets/empty_canvas.png#center alt="Empty Canvas" width=50%><figcaption><p>Empty Canvas</p></figcaption></figure><h2 id=modelsobjects>Models/Objects<a hidden class=anchor aria-hidden=true href=#modelsobjects>#</a></h2><p>Let&rsquo;s start with our Snake; To represent the snake we’ll use a List of 2D points, and the number of points increases when the snake eats food. The first element of the list will be the location of the head and the last element, the tail. A point is just x, y values on a grid and for that, we’ll use dart’s <code>Point</code> class (imported from <code>dart:math</code>).</p><p>We also need a <code>direction</code> to represent in which direction the snake is moving, this can also be represented using a <code>Point</code> object since we just need to update the <code>head</code> of the snake along a certain axis, i.e. certain x, y values. We can add these directions to the constants and define our snake:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Constants</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>double</span> canvasSize <span style=color:#f92672>=</span> <span style=color:#ae81ff>500</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>double</span> blockSize <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Directions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> up <span style=color:#f92672>=</span> Point(<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> down <span style=color:#f92672>=</span> Point(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> right <span style=color:#f92672>=</span> Point(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>const</span> left <span style=color:#f92672>=</span> Point(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Snake</span> {
</span></span><span style=display:flex><span>  List<span style=color:#f92672>&lt;</span>Point<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;</span> snake <span style=color:#f92672>=</span> [<span style=color:#66d9ef>const</span> Point(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>)];
</span></span><span style=display:flex><span>  Point<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> direction <span style=color:#f92672>=</span> Constants.right;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  Point<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>get</span> head {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> snake[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Now, we can add a snake object to our <code>GameState</code> along with the food, which also can be just a <code>Point</code>. In the below code, we introduce some things:</p><ul><li><code>random</code>: To generate random numbers (random food locations).</li><li><code>initGame</code>: To initialize the Snake object and food location.</li><li><code>foodUpdate</code>: To update food location.</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>_GameState</span> <span style=color:#66d9ef>extends</span> State<span style=color:#f92672>&lt;</span>Game<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>	late Snake snake;
</span></span><span style=display:flex><span>	late Point<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> food;
</span></span><span style=display:flex><span>	Random random <span style=color:#f92672>=</span> Random();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>@</span>override
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>void</span> initState() {
</span></span><span style=display:flex><span>	  initGame();
</span></span><span style=display:flex><span>	  <span style=color:#66d9ef>super</span>.initState();
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	initGame() {
</span></span><span style=display:flex><span>	  snake <span style=color:#f92672>=</span> Snake();
</span></span><span style=display:flex><span>	  foodUpdate();
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>void</span> foodUpdate() {
</span></span><span style=display:flex><span>	  food <span style=color:#f92672>=</span> Point(random.nextInt(Constants.canvasSize <span style=color:#f92672>~/</span> Constants.blockSize),
</span></span><span style=display:flex><span>	      random.nextInt(Constants.canvasSize <span style=color:#f92672>~/</span> Constants.blockSize));
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>@</span>override
</span></span><span style=display:flex><span>	Widget build(BuildContext context) {
</span></span><span style=display:flex><span>	  <span style=color:#66d9ef>return</span> Container(
</span></span><span style=display:flex><span>	    width: Constants.canvasSize,
</span></span><span style=display:flex><span>	    height: Constants.canvasSize,
</span></span><span style=display:flex><span>	    color: Colors.black,
</span></span><span style=display:flex><span>	  );
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Now we are more or less done with the foundation code, we just need to paint the snake and food on the canvas. For that, we’ll use <code>Stack</code> and <code>Positioned</code> Widgets. <code>Positioned</code> puts a widget to provided locations in a <code>Stack</code>. We’ll use the properties, <code>top</code> and <code>left</code> to set <code>y</code> and <code>x</code> of the widget respectively.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span>Widget build(BuildContext context) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> Container(
</span></span><span style=display:flex><span>    width: Constants.canvasSize,
</span></span><span style=display:flex><span>    height: Constants.canvasSize,
</span></span><span style=display:flex><span>    color: Colors.black,
</span></span><span style=display:flex><span>    child: Stack(
</span></span><span style=display:flex><span>      children: snake.snake
</span></span><span style=display:flex><span>              .map((e) <span style=color:#f92672>=&gt;</span> Positioned(
</span></span><span style=display:flex><span>                    top: Constants.blockSize <span style=color:#f92672>*</span> e.y,
</span></span><span style=display:flex><span>                    left: Constants.blockSize <span style=color:#f92672>*</span> e.x,
</span></span><span style=display:flex><span>                    child: Container(
</span></span><span style=display:flex><span>                      height: Constants.blockSize,
</span></span><span style=display:flex><span>                      width: Constants.blockSize,
</span></span><span style=display:flex><span>                      color: Colors.green,
</span></span><span style=display:flex><span>                    ),
</span></span><span style=display:flex><span>                  ))
</span></span><span style=display:flex><span>              .toList() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>          [
</span></span><span style=display:flex><span>            Positioned(
</span></span><span style=display:flex><span>              top: Constants.blockSize <span style=color:#f92672>*</span> food.y,
</span></span><span style=display:flex><span>              left: Constants.blockSize <span style=color:#f92672>*</span> food.x,
</span></span><span style=display:flex><span>              child: Container(
</span></span><span style=display:flex><span>                height: Constants.blockSize,
</span></span><span style=display:flex><span>                width: Constants.blockSize,
</span></span><span style=display:flex><span>                color: Colors.red,
</span></span><span style=display:flex><span>              ),
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>          ],
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>In the above code, we basically created a Positioned Widget for each part of the snake and added a food object as well to that list.</p><figure class=align-center><img loading=lazy src=https://raw.githubusercontent.com/yashlamba/portfolio/master/assets/snake_food_1.png#center alt="Painting Snake and Food" width=50%><figcaption><p>Painting Snake and Food</p></figcaption></figure><h2 id=update-state>Update State<a hidden class=anchor aria-hidden=true href=#update-state>#</a></h2><p>Let’s make the game alive now. We want to periodically update the state of the canvas and for that, we can use <code>Timer.periodic</code> (imported from <code>dart:async</code>) which calls a function after certain <code>Duration</code> periodically.</p><p>We can add it to the <code>initState</code> which gets called once our game starts. We also need an update function, which is passed as a callback to <code>Timer.periodic</code> and is responsible for updating the game state.</p><p>Before implementing this <code>gameUpdate</code> function, let’s see what we actually need to update:</p><ul><li>Move the snake in a particular direction</li><li>Check if the snake’s head overlaps with food<ul><li>if yes, eat food, add length to the snake, and call <code>foodUpdate</code></li></ul></li><li>Check if the snake’s head overlapped with any other body part, if yes, reset the game.</li></ul><p>Implementation (added to GameState):</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>override
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> initState() {
</span></span><span style=display:flex><span>  initGame();
</span></span><span style=display:flex><span>  Timer.periodic(<span style=color:#66d9ef>const</span> Duration(milliseconds: <span style=color:#ae81ff>50</span>), (t) {
</span></span><span style=display:flex><span>    gameUpdate();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>super</span>.initState();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> gameUpdate() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// update this
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (food <span style=color:#f92672>==</span> snake.head) {
</span></span><span style=display:flex><span>    snake.eatFood();
</span></span><span style=display:flex><span>    foodUpdate();
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    snake.update();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (snake.didBiteItself()) {
</span></span><span style=display:flex><span>    initGame();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  setState(() {});
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Added to Snake Class:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#66d9ef>bool</span> didBiteItself() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;</span> snake.length; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (snake[i] <span style=color:#f92672>==</span> head) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> update() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// For moving in a direction, move all body parts to the location of the
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// part before them
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> snake.length <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>; <span style=color:#f92672>--</span>i) {
</span></span><span style=display:flex><span>    snake[i] <span style=color:#f92672>=</span> snake[i <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Then update in the direction snake is moving
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// Mod 50 because, we want the snake to wrap when hitting a wall
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  snake[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> Point((head.x <span style=color:#f92672>+</span> direction.x) <span style=color:#f92672>%</span> <span style=color:#ae81ff>50</span>, (head.y <span style=color:#f92672>+</span> direction.y) <span style=color:#f92672>%</span> <span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> eatFood() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Since food is added to the end and snake would ultimately
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// Update one position, save the last location and append it again.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>var</span> foodLoc <span style=color:#f92672>=</span> snake.last;
</span></span><span style=display:flex><span>  update();
</span></span><span style=display:flex><span>  snake.add(foodLoc);
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>At this point, our game starts working (not controllable though). One bug I would like to address is that our <code>foodUpdate</code> might add the food on the snake&rsquo;s body, so let&rsquo;s add a check for that.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#75715e>// In the Stateful Widget
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> foodUpdate() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>do</span> {
</span></span><span style=display:flex><span>    food <span style=color:#f92672>=</span> Point(random.nextInt(Constants.canvasSize <span style=color:#f92672>~/</span> Constants.blockSize),
</span></span><span style=display:flex><span>        random.nextInt(Constants.canvasSize <span style=color:#f92672>~/</span> Constants.blockSize));
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>while</span> (snake.pointOnSnake(food));
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// In the snake class
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>bool</span> pointOnSnake(Point<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> point) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (Point body <span style=color:#66d9ef>in</span> snake) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (body <span style=color:#f92672>==</span> point) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Another interesting thing in the above code is <code>snake[0] = Point((head.x + direction.x) % 50, (head.y + direction.y) % 50);</code> this line is really interesting on how it handles negative x, y cases (read about mod with negative numbers).</p><iframe style=width:100%;height:600px src="https://dartpad.dev/embed-flutter.html?id=8b5aa009b69df40291ef5df88316c9f2&split=1&theme=dark"></iframe><h2 id=controls>Controls<a hidden class=anchor aria-hidden=true href=#controls>#</a></h2><p>We are pretty much done now, we just need to be able to control the snake, that’s it. I understand the chronology of this is a bit weird and we should have done this before the whole eat food logic, but having implemented the snake game quite a bit, I usually do this at the end.</p><p>This part doesn’t need much explanation, just two things are sufficient I guess:</p><ul><li>We are using <code>RawKeyboardListener</code> widget with <code>autofocus</code> set to true (so that we don’t have to tap it to take control). We’ll also define a <code>keyHandler</code> function to handle the events by the listener. (<code>LogicalKeyboardKey</code> is imported from <code>flutter/services.dart</code>)</li><li>Two edge/additional cases I would like to address:<ol><li>We don’t allow the snake to go in the direct opposite direction.</li><li>We don’t call <code>setState</code> because regardless, it would be called within max <code>50 ms</code>; We CAN call it but it won’t make much of a difference.</li></ol></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#66d9ef>void</span> keyHandler(RawKeyEvent event) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (event.logicalKey <span style=color:#f92672>==</span> LogicalKeyboardKey.arrowDown) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (snake.direction <span style=color:#f92672>!=</span> Constants.up) {
</span></span><span style=display:flex><span>      snake.direction <span style=color:#f92672>=</span> Constants.down;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (event.logicalKey <span style=color:#f92672>==</span> LogicalKeyboardKey.arrowUp) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (snake.direction <span style=color:#f92672>!=</span> Constants.down) {
</span></span><span style=display:flex><span>      snake.direction <span style=color:#f92672>=</span> Constants.up;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (event.logicalKey <span style=color:#f92672>==</span> LogicalKeyboardKey.arrowRight) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (snake.direction <span style=color:#f92672>!=</span> Constants.left) {
</span></span><span style=display:flex><span>      snake.direction <span style=color:#f92672>=</span> Constants.right;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (event.logicalKey <span style=color:#f92672>==</span> LogicalKeyboardKey.arrowLeft) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (snake.direction <span style=color:#f92672>!=</span> Constants.right) {
</span></span><span style=display:flex><span>      snake.direction <span style=color:#f92672>=</span> Constants.left;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>override
</span></span><span style=display:flex><span>Widget build(BuildContext context) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> RawKeyboardListener(
</span></span><span style=display:flex><span>    focusNode: FocusNode(),
</span></span><span style=display:flex><span>    onKey: keyHandler,
</span></span><span style=display:flex><span>    autofocus: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    child: Container(
</span></span><span style=display:flex><span>      width: Constants.canvasSize,
</span></span><span style=display:flex><span>      height: Constants.canvasSize,
</span></span><span style=display:flex><span>      color: Colors.black,
</span></span><span style=display:flex><span>      child: Stack(
</span></span><span style=display:flex><span>        children: snake.snake <span style=color:#75715e>// Update This
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                .map((e) <span style=color:#f92672>=&gt;</span> Positioned(
</span></span><span style=display:flex><span>                      top: Constants.blockSize <span style=color:#f92672>*</span> e.y,
</span></span><span style=display:flex><span>                      left: Constants.blockSize <span style=color:#f92672>*</span> e.x,
</span></span><span style=display:flex><span>                      child: Container(
</span></span><span style=display:flex><span>                        height: Constants.blockSize,
</span></span><span style=display:flex><span>                        width: Constants.blockSize,
</span></span><span style=display:flex><span>                        color: Colors.green,
</span></span><span style=display:flex><span>                      ),
</span></span><span style=display:flex><span>                    ))
</span></span><span style=display:flex><span>                .toList() <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>            [
</span></span><span style=display:flex><span>              Positioned(
</span></span><span style=display:flex><span>                top: Constants.blockSize <span style=color:#f92672>*</span> food.y,
</span></span><span style=display:flex><span>                left: Constants.blockSize <span style=color:#f92672>*</span> food.x,
</span></span><span style=display:flex><span>                child: Container(
</span></span><span style=display:flex><span>                  height: Constants.blockSize,
</span></span><span style=display:flex><span>                  width: Constants.blockSize,
</span></span><span style=display:flex><span>                  color: Colors.red,
</span></span><span style=display:flex><span>                ),
</span></span><span style=display:flex><span>              )
</span></span><span style=display:flex><span>            ],
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Voila! Our game is ready. Try it below:</p><iframe style=width:100%;height:600px src="https://dartpad.dev/embed-flutter.html?id=7382e974f847b6361cf7159e6890a209&split=1&theme=dark"></iframe><h2 id=follow-ups>Follow Ups<a hidden class=anchor aria-hidden=true href=#follow-ups>#</a></h2><ul><li>This implementation still has a few IO bugs which can lead to snake dying (hint: the way we load frames and update direction). We can use an input queue to fix that.</li><li>Haven&rsquo;t implemented score because it&rsquo;s trivial for this game.</li><li>A good follow up project would be to implement a multiplayer version of this.</li></ul><blockquote><p>This project is quite simple and probaly not blog worthy, but I wrote it anyways because, it was fun and I wanted an easy writeup to get out of my writing rut:)</p></blockquote><hr><fieldset><legend>Links</legend><ul><li><b>Source</b>: <a href=https://gist.github.com/yashlamba/7382e974f847b6361cf7159e6890a209><code>Snake Game</code></a></li><li><b>DartPad</b>: <a href="https://dartpad.dev/?id=7382e974f847b6361cf7159e6890a209"><code>Play Snake Game</code></a></li></ul></fieldset></div><footer class=post-footer><ul class=post-tags><li><a href=https://yashlamba.com/tags/project/>project</a></li><li><a href=https://yashlamba.com/tags/flutter/>flutter</a></li><li><a href=https://yashlamba.com/tags/game/>game</a></li><li><a href=https://yashlamba.com/tags/beginner/>beginner</a></li><li><a href=https://yashlamba.com/tags/mini-project/>mini project</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Snake Game in Minutes with Flutter on twitter" href="https://twitter.com/intent/tweet/?text=Snake%20Game%20in%20Minutes%20with%20Flutter&url=https%3a%2f%2fyashlamba.com%2fblogs%2fflutter-snake%2f&hashtags=project%2cflutter%2cgame%2cbeginner%2cminiproject"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Snake Game in Minutes with Flutter on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fyashlamba.com%2fblogs%2fflutter-snake%2f&title=Snake%20Game%20in%20Minutes%20with%20Flutter&summary=Snake%20Game%20in%20Minutes%20with%20Flutter&source=https%3a%2f%2fyashlamba.com%2fblogs%2fflutter-snake%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Snake Game in Minutes with Flutter on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fyashlamba.com%2fblogs%2fflutter-snake%2f&title=Snake%20Game%20in%20Minutes%20with%20Flutter"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Snake Game in Minutes with Flutter on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fyashlamba.com%2fblogs%2fflutter-snake%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Snake Game in Minutes with Flutter on whatsapp" href="https://api.whatsapp.com/send?text=Snake%20Game%20in%20Minutes%20with%20Flutter%20-%20https%3a%2f%2fyashlamba.com%2fblogs%2fflutter-snake%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Snake Game in Minutes with Flutter on telegram" href="https://telegram.me/share/url?text=Snake%20Game%20in%20Minutes%20with%20Flutter&url=https%3a%2f%2fyashlamba.com%2fblogs%2fflutter-snake%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>© 2022 Yash Lamba</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>